# Описание базы и ER-диаграммы для самостоятельного проекта

## ER-диаграмма
Создана с помощью сервиса https://dbdiagram.io
![ER_Coffee_shops](https://github.com/BgKr-97/-/blob/main/ER_Coffee_shops.png)

## Описание структуры базы данных сети кофеен

База данных включает в себя 10 основных сущностей, каждая из которых отвечает за определенный аспект работы кофейни.

### 1. Кофейни (coffee_shops)
Содержит информацию о заведениях сети. 

Включает в себя:
- id (PK) - уникальный идентификатор кофейни (тип данных - INT);
- name - название кофейни (тип данных - VARCHAR);
- address - адрес заведения (тип данных - TEXT);
- opening_hours - время начала работы заведения (тип данных - time);
- closing_hours - время конца работы заведения (тип данных - time).

Связывается через coffee_shop_id (FK) с заказами (orders), так как каждый заказ оформляется в определенной кофейне, и с сотрудниками (employees), так как каждый работник привязан к конкретному заведению.

### 2. Сотрудники (employees)
Хранит данные о сотрудниках кофейни, включая их имя и должность. 

Включает в себя:
- id (PK) - уникальный идентификатор сотрудника (тип данных - INT);
- name - имя сотрудника (тип данных - VARCHAR);
- position - название должности сотрудника (тип данных - VARCHAR);
- coffee_shop_id (FK) - уникальный идентификатор (тип данных - INT).

Связывается через coffee_shop_id (FK) с кофейнями (coffee_shops), так как каждый сотрудник работает в конкретном месте, и через employee_id (FK) с заказами (orders), так как сотрудник может принять заказ.

### 3. Категории товаров (categories)
Используется для группировки товаров, например: "Кофе", "Десерты", "Сэндвичи". 

Включает в себя:
- id (PK) - уникальный идентификатор категории (тип данных - INT);
- name - название категории (тип данных - VARCHAR).
  
Связывается через category_id (FK) с позициями меню (menu_items), так как каждый товар принадлежит к определенной категории.

### 4. Меню (menu_items)
Содержит информацию о товарах, включая название, описание и цену. 

Включает в себя:
- id (PK) - уникальный идентификатор позиции меню (тип данных - INT);
- name - название позиции меню (тип данных - VARCHAR);
- price - цена позиции меню (тип данных - DECIMAL);
- category_id (FK) - уникальный идентификатор (тип данных - INT).

Связывается через category_id (FK) с категориями (categories), чтобы товары можно было сортировать. Также связана с заказами через order_items, так как товары входят в состав заказов.

### 5. Заказы (orders)
Хранит информацию о заказах клиентов.

Включает в себя:
- id (PK) – уникальный идентификатор заказа (тип данных – INT);
- coffee_shop_id (FK) – идентификатор кофейни, в которой сделан заказ (тип данных – INT);
- employee_id (FK, NULLABLE) – сотрудник, оформивший заказ (если заказ сделан в кофейне) (тип данных – INT);
- courier_id (FK, NULLABLE) – курьер, доставляющий заказ (если заказ оформлен на доставку) (тип данных – INT);
- customer_id (FK, NULLABLE) – клиент, сделавший заказ (тип данных – INT);
- order_time – время оформления заказа (тип данных – TIMESTAMP).

Связывается через id (PK) с:
- order_items, так как каждый заказ состоит из товаров;
- employees, если заказ оформил сотрудник в кофейне;
- couriers, если заказ доставляется курьером;
- customers, если заказ оформил зарегистрированный клиент.

### 6. Состав заказа (order_items)
Связывает заказы и товары.

Включает в себя:
- id (PK) – уникальный идентификатор записи (тип данных – INT);
- order_id (FK) – идентификатор заказа (тип данных – INT);
- menu_item_id (FK) – идентификатор товара из меню (тип данных – INT);
- quantity – количество заказанных единиц (тип данных – INT).

Связывается через order_id (FK) с orders и через menu_item_id (FK) с menu_items.

### 7. Клиенты (customers)
Содержит данные о клиентах (если у них есть программа лояльности или учетная запись).

Включает в себя:
- id (PK) – уникальный идентификатор клиента (тип данных – INT);
- name – имя клиента (тип данных – VARCHAR);
- phone – номер телефона (уникальный, тип данных – VARCHAR);
- email – электронная почта (уникальная, тип данных – VARCHAR).

Связывается через id (PK) с:
- orders, так как клиент может оформлять заказы;
- customer_actions, где фиксируются его действия.

### 8. Курьеры (couriers)
Хранит информацию о курьерах, которые могут доставлять заказы.

Включает в себя:
- id (PK) – уникальный идентификатор курьера (тип данных – INT);
- name – имя курьера (тип данных – VARCHAR);
- phone – контактный номер (уникальный, тип данных – VARCHAR);
- vehicle_type – тип транспорта (например, "велосипед", "авто") (тип данных – VARCHAR).

Связывается через id (PK) с:
- orders, если курьер доставляет заказ;
- courier_actions, где фиксируются его действия.

### 9. Действия клиентов (customer_actions)
Фиксирует события, связанные с заказом, например, его создание или отмену.

Включает в себя:
- id (PK) – уникальный идентификатор записи (тип данных – INT);
- customer_id (FK) – клиент, совершивший действие (тип данных – INT);
- order_id (FK) – заказ, к которому относится действие (тип данных – INT);
- action – тип действия (например, "created", "canceled") (тип данных – ENUM);
- action_time – время действия (тип данных – TIMESTAMP).

Связывается через customer_id (FK) с customers и через order_id (FK) с orders.

### 10. Действия курьеров (courier_actions)
Фиксирует статусы работы курьера с заказами, например, принятие и доставку.

Включает в себя:
- id (PK) – уникальный идентификатор записи (тип данных – INT);
- courier_id (FK) – курьер, совершивший действие (тип данных – INT);
- order_id (FK) – заказ, к которому относится действие (тип данных – INT);
- action – тип действия (например, "accepted", "delivered") (тип данных – ENUM);
- action_time – время действия (тип данных – TIMESTAMP).

Связывается через courier_id (FK) с couriers и через order_id (FK) с orders.



















